<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:Yaat.Client.ViewModels"
        x:Class="Yaat.Client.Views.SettingsWindow"
        Icon="avares://Yaat.Client/Resources/icon.png"
        Title="Settings">

    <Design.DataContext>
        <vm:SettingsViewModel />
    </Design.DataContext>

    <DockPanel Margin="12">

        <!-- Bottom buttons -->
        <StackPanel DockPanel.Dock="Bottom"
                    Orientation="Horizontal"
                    HorizontalAlignment="Right"
                    Spacing="8"
                    Margin="0,12,0,0">
            <Button Content="Save"
                    x:Name="SaveButton"
                    Width="80" />
            <Button Content="Cancel"
                    x:Name="CancelButton"
                    Width="80" />
        </StackPanel>

        <!-- Tab content -->
        <TabControl>

            <!-- Identity tab -->
            <TabItem Header="Identity">
                <StackPanel Margin="12" Spacing="12">
                    <StackPanel Spacing="4">
                        <TextBlock Text="VATSIM CID:"
                                   Foreground="Gray" />
                        <TextBox Text="{Binding VatsimCid}"
                                 Watermark="e.g. 1826127"
                                 Width="120"
                                 HorizontalAlignment="Left" />
                        <TextBlock Text="Your VATSIM CID. Used to link your CRC client to the correct training room."
                                   TextWrapping="Wrap"
                                   Foreground="Gray"
                                   FontSize="11" />
                    </StackPanel>
                    <StackPanel Spacing="4">
                        <TextBlock Text="Initials (2 letters):"
                                   Foreground="Gray" />
                        <TextBox Text="{Binding UserInitials}"
                                 MaxLength="2"
                                 Watermark="e.g. AB"
                                 Width="80"
                                 HorizontalAlignment="Left" />
                        <TextBlock Text="Shown in the terminal panel so other RPOs can see who issued each command."
                                   TextWrapping="Wrap"
                                   Foreground="Gray"
                                   FontSize="11" />
                    </StackPanel>
                    <StackPanel Spacing="4">
                        <TextBlock Text="ARTCC:"
                                   Foreground="Gray" />
                        <TextBox Text="{Binding ArtccId}"
                                 MaxLength="4"
                                 Watermark="e.g. ZOA"
                                 Width="80"
                                 HorizontalAlignment="Left" />
                        <TextBlock Text="Your ARTCC identifier. Used in room names and to determine facility data."
                                   TextWrapping="Wrap"
                                   Foreground="Gray"
                                   FontSize="11" />
                    </StackPanel>
                </StackPanel>
            </TabItem>

            <!-- Scenarios tab -->
            <TabItem Header="Scenarios">
                <StackPanel Margin="12" Spacing="12">
                    <StackPanel Spacing="4">
                        <CheckBox Content="Auto-accept handoffs to unattended positions"
                                  IsChecked="{Binding AutoAcceptEnabled}" />
                        <StackPanel Spacing="4"
                                    IsVisible="{Binding AutoAcceptEnabled}"
                                    Margin="28,0,0,0">
                            <TextBlock Text="Delay (seconds):"
                                       Foreground="Gray" />
                            <NumericUpDown Value="{Binding AutoAcceptDelaySeconds}"
                                           Minimum="0"
                                           Maximum="60"
                                           Increment="1"
                                           Width="120"
                                           HorizontalAlignment="Left" />
                            <TextBlock Text="Handoffs are automatically accepted after this delay. Set to 0 for immediate acceptance."
                                       TextWrapping="Wrap"
                                       Foreground="Gray"
                                       FontSize="11" />
                        </StackPanel>
                    </StackPanel>
                    <StackPanel Spacing="4">
                        <TextBlock Text="Auto-Delete Aircraft:"
                                   Foreground="Gray" />
                        <ComboBox ItemsSource="{Binding AutoDeleteOptions}"
                                  SelectedIndex="{Binding SelectedAutoDeleteIndex}"
                                  Width="220"
                                  HorizontalAlignment="Left" />
                        <TextBlock Text="Controls whether aircraft are automatically removed after landing or parking. 'Use Scenario Setting' defers to the scenario's autoDeleteMode field."
                                   TextWrapping="Wrap"
                                   Foreground="Gray"
                                   FontSize="11" />
                    </StackPanel>
                </StackPanel>
            </TabItem>

            <!-- Commands tab -->
            <TabItem Header="Commands">
                <DockPanel Margin="12">

                    <!-- Scheme selector -->
                    <StackPanel DockPanel.Dock="Top"
                                Orientation="Horizontal"
                                Spacing="8"
                                Margin="0,0,0,12">
                        <TextBlock Text="Command Scheme:"
                                   VerticalAlignment="Center" />
                        <ComboBox ItemsSource="{Binding PresetNames_}"
                                  SelectedIndex="{Binding SelectedPresetIndex}"
                                  PlaceholderText="Custom"
                                  Width="160" />
                    </StackPanel>

                    <!-- Verb mapping table -->
                    <DataGrid ItemsSource="{Binding VerbMappings}"
                              AutoGenerateColumns="False"
                              GridLinesVisibility="Horizontal"
                              CanUserResizeColumns="False"
                              CanUserSortColumns="False"
                              SelectionMode="Single"
                              HeadersVisibility="Column">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Command"
                                Binding="{Binding CommandName}"
                                IsReadOnly="True"
                                Width="150" />
                            <DataGridTextColumn Header="Verb(s)"
                                Binding="{Binding Aliases}"
                                Width="160" />
                            <DataGridTextColumn Header="Example"
                                Binding="{Binding Example}"
                                IsReadOnly="True"
                                Width="*" />
                        </DataGrid.Columns>
                    </DataGrid>

                </DockPanel>
            </TabItem>

            <!-- Advanced tab -->
            <TabItem Header="Advanced">
                <StackPanel Margin="12" Spacing="12">
                    <CheckBox Content="Server Admin Mode"
                              IsChecked="{Binding IsAdminMode}" />
                    <StackPanel Spacing="4"
                                IsVisible="{Binding IsAdminMode}">
                        <TextBlock Text="Admin Password:"
                                   Foreground="Gray" />
                        <TextBox Text="{Binding AdminPassword}"
                                 PasswordChar="*"
                                 Watermark="Enter server admin password"
                                 Width="300"
                                 HorizontalAlignment="Left" />
                    </StackPanel>
                    <TextBlock TextWrapping="Wrap"
                               Foreground="Gray"
                               FontSize="11"
                               Text="Admin mode allows you to see all scenarios running on the server, filter the aircraft list by scenario, and manage aircraft across all scenarios." />
                </StackPanel>
            </TabItem>

        </TabControl>

    </DockPanel>
</Window>
