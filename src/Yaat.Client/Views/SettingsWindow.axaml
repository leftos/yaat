<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:Yaat.Client.ViewModels"
        x:Class="Yaat.Client.Views.SettingsWindow"
        Title="Settings">

    <Design.DataContext>
        <vm:SettingsViewModel />
    </Design.DataContext>

    <DockPanel Margin="12">

        <!-- Bottom buttons -->
        <StackPanel DockPanel.Dock="Bottom"
                    Orientation="Horizontal"
                    HorizontalAlignment="Right"
                    Spacing="8"
                    Margin="0,12,0,0">
            <Button Content="Save"
                    x:Name="SaveButton"
                    Width="80" />
            <Button Content="Cancel"
                    x:Name="CancelButton"
                    Width="80" />
        </StackPanel>

        <!-- Tab content -->
        <TabControl>

            <!-- General tab -->
            <TabItem Header="General">
                <StackPanel Margin="12" Spacing="12">
                    <StackPanel Spacing="4">
                        <TextBlock Text="Your Initials (2 letters):"
                                   Foreground="Gray" />
                        <TextBox Text="{Binding UserInitials}"
                                 MaxLength="2"
                                 Watermark="e.g. AB"
                                 Width="80"
                                 HorizontalAlignment="Left" />
                        <TextBlock Text="Required before connecting. Shown in the terminal panel so other RPOs can see who issued each command."
                                   TextWrapping="Wrap"
                                   Foreground="Gray"
                                   FontSize="11" />
                    </StackPanel>
                    <StackPanel Spacing="4">
                        <TextBlock Text="Auto-accept handoff delay (seconds):"
                                   Foreground="Gray" />
                        <NumericUpDown Value="{Binding AutoAcceptDelaySeconds}"
                                       Minimum="0"
                                       Maximum="60"
                                       Increment="1"
                                       Width="120"
                                       HorizontalAlignment="Left" />
                        <TextBlock Text="Handoffs to unattended positions are automatically accepted after this delay. Set to 0 for immediate acceptance."
                                   TextWrapping="Wrap"
                                   Foreground="Gray"
                                   FontSize="11" />
                    </StackPanel>
                </StackPanel>
            </TabItem>

            <!-- Commands tab -->
            <TabItem Header="Commands">
                <DockPanel Margin="12">

                    <!-- Scheme selector -->
                    <StackPanel DockPanel.Dock="Top"
                                Orientation="Horizontal"
                                Spacing="8"
                                Margin="0,0,0,12">
                        <TextBlock Text="Command Scheme:"
                                   VerticalAlignment="Center" />
                        <ComboBox ItemsSource="{Binding PresetNames_}"
                                  SelectedIndex="{Binding SelectedPresetIndex}"
                                  PlaceholderText="Custom"
                                  Width="160" />
                    </StackPanel>

                    <!-- Verb mapping table -->
                    <DataGrid ItemsSource="{Binding VerbMappings}"
                              AutoGenerateColumns="False"
                              GridLinesVisibility="Horizontal"
                              CanUserResizeColumns="False"
                              CanUserSortColumns="False"
                              SelectionMode="Single"
                              HeadersVisibility="Column">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Command"
                                Binding="{Binding CommandName}"
                                IsReadOnly="True"
                                Width="150" />
                            <DataGridTextColumn Header="Verb(s)"
                                Binding="{Binding Aliases}"
                                Width="160" />
                            <DataGridTextColumn Header="Example"
                                Binding="{Binding Example}"
                                IsReadOnly="True"
                                Width="*" />
                        </DataGrid.Columns>
                    </DataGrid>

                </DockPanel>
            </TabItem>

            <!-- Advanced tab -->
            <TabItem Header="Advanced">
                <StackPanel Margin="12" Spacing="12">
                    <CheckBox Content="Server Admin Mode"
                              IsChecked="{Binding IsAdminMode}" />
                    <StackPanel Spacing="4"
                                IsVisible="{Binding IsAdminMode}">
                        <TextBlock Text="Admin Password:"
                                   Foreground="Gray" />
                        <TextBox Text="{Binding AdminPassword}"
                                 PasswordChar="*"
                                 Watermark="Enter server admin password"
                                 Width="300"
                                 HorizontalAlignment="Left" />
                    </StackPanel>
                    <TextBlock TextWrapping="Wrap"
                               Foreground="Gray"
                               FontSize="11"
                               Text="Admin mode allows you to see all scenarios running on the server, filter the aircraft list by scenario, and manage aircraft across all scenarios." />
                </StackPanel>
            </TabItem>

        </TabControl>

    </DockPanel>
</Window>
