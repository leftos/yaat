<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:Yaat.ViewModels"
        x:Class="Yaat.Views.MainWindow"
        Title="YAAT"
        Width="900" Height="600">

    <Design.DataContext>
        <vm:MainViewModel />
    </Design.DataContext>

    <DockPanel Margin="12">
        <!-- Top bar: URL + Connect -->
        <StackPanel DockPanel.Dock="Top"
                    Orientation="Horizontal"
                    Spacing="8"
                    Margin="0,0,0,12">
            <TextBox Text="{Binding ServerUrl}"
                     Watermark="Server URL"
                     Width="400" />
            <Button Content="{Binding IsConnected,
                    Converter={x:Static vm:ConnectButtonConverter.Instance}}"
                    Command="{Binding ConnectCommand}" />
            <TextBlock Text="{Binding StatusText}"
                       VerticalAlignment="Center"
                       Margin="12,0,0,0"
                       Foreground="Gray" />
        </StackPanel>

        <!-- Bottom bar: Spawn -->
        <StackPanel DockPanel.Dock="Bottom"
                    Orientation="Horizontal"
                    Spacing="8"
                    Margin="0,12,0,0">
            <Button Content="Spawn Aircraft"
                    Command="{Binding SpawnCommand}" />
        </StackPanel>

        <!-- Center: Aircraft list -->
        <DataGrid ItemsSource="{Binding Aircraft}"
                  AutoGenerateColumns="False"
                  IsReadOnly="True"
                  GridLinesVisibility="Horizontal"
                  CanUserResizeColumns="True">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Callsign"
                                    Binding="{Binding Callsign}"
                                    Width="100" />
                <DataGridTextColumn Header="Type"
                                    Binding="{Binding AircraftType}"
                                    Width="80" />
                <DataGridTextColumn Header="Latitude"
                                    Binding="{Binding Latitude,
                                    StringFormat=\{0:F4\}}"
                                    Width="100" />
                <DataGridTextColumn Header="Longitude"
                                    Binding="{Binding Longitude,
                                    StringFormat=\{0:F4\}}"
                                    Width="100" />
                <DataGridTextColumn Header="Heading"
                                    Binding="{Binding Heading,
                                    StringFormat=\{0:F0\}}"
                                    Width="80" />
                <DataGridTextColumn Header="Altitude"
                                    Binding="{Binding Altitude,
                                    StringFormat=\{0:F0\}}"
                                    Width="80" />
                <DataGridTextColumn Header="Speed"
                                    Binding="{Binding GroundSpeed,
                                    StringFormat=\{0:F0\}}"
                                    Width="80" />
                <DataGridTextColumn Header="Squawk"
                                    Binding="{Binding BeaconCode,
                                    StringFormat=\{0:D4\}}"
                                    Width="80" />
            </DataGrid.Columns>
        </DataGrid>
    </DockPanel>
</Window>
